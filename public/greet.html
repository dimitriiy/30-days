<!doctype html>
<html lang="en" class="dark">
  <head>
    <meta charset="UTF-8" />

    <meta
      name="viewport"
      content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0"
    />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <link rel="stylesheet" href="css/stolen-styles.css" />
    <link rel="stylesheet" href="css/styles.css" />

    <title>–° –Ω–æ–≤—ã–º –≥–æ–¥–æ–º!</title>
  </head>
  <link rel="preconnect" href="https://fonts.googleapis.com" />

  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Pattaya&family=Marck+Script&display=swap" rel="stylesheet" />

  <!-- <link
    href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap"
    rel="stylesheet"
  /> -->
  <!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery-modal/0.9.1/jquery.modal.min.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" />
  <link rel="stylesheet" href="//code.jquery.com/ui/1.13.2/themes/base/jquery-ui.css" />
  <link rel="stylesheet" href="/resources/demos/style.css" />
  <link href="https://cdn.jsdelivr.net/npm/flipdown@0.3.2/dist/flipdown.min.css" rel="stylesheet" />
  <script defer src="https://cdn.tailwindcss.com"></script>
  <script
    defer
    src="
  https://cdn.jsdelivr.net/npm/tailwindcss-animated@1.0.1/src/index.min.js
  "
  ></script> -->
  <!-- <script defer src="https://cdn.tailwindcss.com?plugins=forms,typography,aspect-ratio,line-clamp"></script> -->
  <!-- <script defer src="https://code.jquery.com/jquery-3.6.0.js"></script> -->
  <!-- <script defer src="https://cdnjs.cloudflare.com/ajax/libs/jquery-modal/0.9.1/jquery.modal.min.js"></script> -->
  <!-- <script defer src="https://cdn.jsdelivr.net/npm/flipdown@0.3.2/src/flipdown.min.js"></script> -->
  <script defer src="https://unpkg.com/fireworks-js@2.x/dist/index.umd.js" defer></script>
  <!-- <script defer type="module" src="js/utils.js"></script>
  <script defer type="module" src="js/api.js"></script>
  <script defer type="module" src="js/view.js"></script>
  <script defer type="module" src="js/index.js"></script> -->

  <body>
    <div class="bg-lights" id="lights"></div>

    <div class="ornament ornament-1"></div>
    <div class="ornament ornament-2"></div>

    <div class="container">
      <div class="card">
        <h1 class="title">‚ú® –° –Ω–æ–≤—ã–º –≥–æ–¥–æ–º ‚ú®</h1>

        <!-- –°–µ–∫—Ü–∏—è –ª–æ–≥–∏–Ω–∞ -->
        <div class="login-section" id="loginSection">
          <div class="form-group">
            <label for="password">–ú–∞–≥–∏—á–µ—Å–∫–æ–µ —Å–ª–æ–≤–æ:</label>
            <input type="input" id="password" placeholder="–í–≤–µ–¥–∏ —Å–ª–æ–≤–æ..." autocomplete="off" />
          </div>
          <button class="btn btn-primary" id="submitBtn">–í–æ–π—Ç–∏</button>
          <div class="error-message hidden-error" id="errorMsg"></div>
        </div>

        <!-- –°–µ–∫—Ü–∏—è –ø–æ–∑–¥—Ä–∞–≤–ª–µ–Ω–∏—è -->
        <div class="greeting-section" id="greetingSection">
          <h2 class="greeting-title">üéâ –ü–æ–∑–¥—Ä–∞–≤–ª—è—é! üéâ</h2>
          <p class="greeting-text"></p>
          <p class="greeting-text">–ü—É—Å—Ç—å —ç—Ç–æ—Ç –≥–æ–¥ –ø—Ä–∏–Ω–µ—Å–µ—Ç —Ç–µ–±–µ —Ä–∞–¥–æ—Å—Ç—å, —É—Å–ø–µ—Ö –∏ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏–µ –≤—Å–µ—Ö –∂–µ–ª–∞–Ω–∏–π!</p>
          <button class="btn btn-download" id="downloadBtn">üì• –ü–æ–ª—É—á–∏—Ç—å –ø–æ–¥–∞—Ä–æ–∫</button>
        </div>
      </div>
    </div>
    <audio autoplay src="./output.mp3"></audio>
    <script>
      // –°–æ–∑–¥–∞–Ω–∏–µ —Å–Ω–µ–∂–∏–Ω–æ–∫
      function createSnowflakes() {
        const snowflakeChars = ['‚ùÑ', '‚ùÖ', '‚ùÜ', '‚õÑ'];
        setInterval(() => {
          const snowflake = document.createElement('div');
          snowflake.classList.add('snowflake');
          snowflake.textContent = snowflakeChars[Math.floor(Math.random() * snowflakeChars.length)];
          snowflake.style.left = Math.random() * window.innerWidth + 'px';
          snowflake.style.animationDuration = Math.random() * 5 + 10 + 's';
          snowflake.style.fontSize = Math.random() * 1.5 + 0.5 + 'em';
          document.body.appendChild(snowflake);

          setTimeout(() => snowflake.remove(), 15000);
        }, 300);
      }

      // –°–æ–∑–¥–∞–Ω–∏–µ —Ñ–æ–Ω–æ–≤—ã—Ö –æ–≥–æ–Ω—å–∫–æ–≤
      function createLights() {
        const lightsContainer = document.getElementById('lights');
        for (let i = 0; i < 30; i++) {
          const light = document.createElement('div');
          light.classList.add('light');
          light.style.left = Math.random() * 100 + '%';
          light.style.top = Math.random() * 100 + '%';
          light.style.animationDuration = Math.random() * 3 + 2 + 's';
          light.style.animationDelay = Math.random() * 3 + 's';
          lightsContainer.appendChild(light);
        }
      }

      // –ö–æ–Ω—Ñ–µ—Ç—Ç–∏ —ç—Ñ—Ñ–µ–∫—Ç
      function createConfetti() {
        for (let i = 0; i < 50; i++) {
          const confetti = document.createElement('div');
          confetti.classList.add('confetti');
          confetti.style.left = Math.random() * window.innerWidth + 'px';
          confetti.style.top = -10 + 'px';
          confetti.style.backgroundColor = ['#ffd700', '#32b8c6', '#ff6b6b', '#4ecdc4'][Math.floor(Math.random() * 4)];
          confetti.style.animation = `snowfall ${Math.random() * 3 + 2}s linear infinite`;
          document.body.appendChild(confetti);

          setTimeout(() => confetti.remove(), (Math.random() * 3 + 2) * 1000);
        }
      }

      function upperFirstLet(text) {
        return `${text.substring(0, 1).toUpperCase()}${text.substring(1)}`;
      }

      const encodeBase64 = (str) => btoa(String.fromCharCode(...new TextEncoder().encode(str)));

      const decodeBase64 = (b64) => new TextDecoder().decode(Uint8Array.from(atob(b64), (c) => c.charCodeAt(0)));

      function sendGiftLogic() {
        const randoms = [
          '0Y3QtNC40Lo=',
          '0LzQsNGI0LA=',
          '0L7Qu9GP',
          '0YHQsNGI0LA=',
          '0L3QsNGC0LDRiNCw',
          '0LDQvdGP',
          '0LjRgNCw',
          '0LPQtdCy0LA=',
          '0LLQuNC60LA=',
        ];

        const passwordInput = document.getElementById('password');
        const submitBtn = document.getElementById('submitBtn');
        const loginSection = document.getElementById('loginSection');
        const greetingSection = document.getElementById('greetingSection');
        const errorMsg = document.getElementById('errorMsg');
        const downloadBtn = document.getElementById('downloadBtn');

        submitBtn.addEventListener('click', () => {
          const enteredPassword = passwordInput.value.toLowerCase().trim();
          const decoded = encodeBase64(enteredPassword);

          if (randoms.includes(decoded)) {
            loginSection.classList.add('hidden');
            greetingSection.classList.add('show');
            document.querySelector('.greeting-text').innerHTML =
              `–° –ù–æ–≤—ã–º –ì–æ–¥–æ–º, ${upperFirstLet(enteredPassword)} ! üéÑ`;
            createConfetti();

            // –û—á–∏—Å—Ç–∫–∞ –æ—à–∏–±–∫–∏
            errorMsg.classList.add('hidden-error');
          } else {
            errorMsg.textContent = '‚ùå –ù–µ–≤–µ—Ä–Ω–æ–µ —Å–ª–æ–≤–æ. –ü–æ–ø—Ä–æ–±—É–π –µ—â–µ —Ä–∞–∑...';
            errorMsg.classList.remove('hidden-error');
            passwordInput.value = '';
            passwordInput.focus();
          }
        });

        // Enter –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏
        passwordInput.addEventListener('keypress', (e) => {
          if (e.key === 'Enter') {
            submitBtn.click();
          }
        });

        // –°–∫–∞—á–∏–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–∞
        downloadBtn.addEventListener('click', () => {
          const text = `
            ‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
            ‚ïë  üéâ  –° –ù–û–í–´–ú –ì–û–î–û–ú, –î–ò–ú–ê!  üéâ             ‚ïë
            ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù

            –î–æ—Ä–æ–≥–æ–π –î–∏–º–∞!

            –ü—É—Å—Ç—å —ç—Ç–æ—Ç –ù–æ–≤—ã–π –ì–æ–¥ –ø—Ä–∏–Ω–µ—Å–µ—Ç —Ç–µ–±–µ:
            ‚ú® –†–∞–¥–æ—Å—Ç—å –∏ –≤–¥–æ—Ö–Ω–æ–≤–µ–Ω–∏–µ
            üéØ –î–æ—Å—Ç–∏–∂–µ–Ω–∏–µ –≤—Å–µ—Ö —Ü–µ–ª–µ–π
            üí™ –ó–¥–æ—Ä–æ–≤—å–µ –∏ —Å–∏–ª—É
            üöÄ –£—Å–ø–µ—Ö –≤–æ –≤—Å–µ—Ö –Ω–∞—á–∏–Ω–∞–Ω–∏—è—Ö
            ‚ù§Ô∏è –õ—é–±–æ–≤—å –∏ —Ç–µ–ø–ª–æ –±–ª–∏–∑–∫–∏—Ö –ª—é–¥–µ–π

            –ñ–µ–ª–∞—é —Ç–µ–±–µ –±—ã—Ç—å —Å—á–∞—Å—Ç–ª–∏–≤—ã–º –∫–∞–∂–¥—ã–π –¥–µ–Ω—å,
            –≤–æ–ø–ª–æ—â–∞—Ç—å —Å–º–µ–ª—ã–µ –∏–¥–µ–∏,
            –¥–æ—Å—Ç–∏–≥–∞—Ç—å –Ω–µ–≤–µ—Ä–æ—è—Ç–Ω—ã—Ö –≤—ã—Å–æ—Ç
            –∏ –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ —Å–¥–∞–≤–∞—Ç—å—Å—è!

            –ü–æ–∑–¥—Ä–∞–≤–ª—è—é! üéÑ‚ú®

            –°–æ–∑–¥–∞–Ω–æ: ${new Date().toLocaleDateString('ru-RU')}
                        `;

          const blob = new Blob([text], { type: 'text/plain;charset=utf-8' });
          const link = document.createElement('a');
          link.href = URL.createObjectURL(blob);
          link.download = '–ü–æ–∑–¥—Ä–∞–≤–ª–µ–Ω–∏–µ_–î–∏–º–µ.txt';
          link.click();
        });
      }
      function playSound() {
        const audio = document.querySelector('audio'); // or video
        const playPromise = audio.play();

        if (playPromise !== undefined) {
          playPromise
            .then(() => {})
            .catch((error) => {
              if (error.name === 'NotAllowedError') {
                const btn = document.createElement('button');
                btn.textContent = '–í–∫–ª—é—á–∏—Ç—å –º—É–∑—ã–∫—É';
                btn.classList.add('music-btn');
                btn.classList.add('btn');
                btn.onclick = (e) => {
                  audio.play();
                  e.target.remove();
                };
                document.body.appendChild(btn);
              }
            });
        }
      }

      createSnowflakes();
      createLights();
      sendGiftLogic();
      playSound();
    </script>
  </body>
</html>
